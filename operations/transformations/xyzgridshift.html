<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Geocentric grid shift &mdash; PROJ 9.2.1 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="canonical" href="https://proj.orgoperations/transformations/xyzgridshift.html"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=6ebb12ef"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="The pipeline operator" href="../pipeline.html" />
    <link rel="prev" title="Vertical grid shift" href="vgridshift.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #353130" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                9.2.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../news.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/index.html">Using PROJ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apps/index.html">Applications</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Coordinate operations</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../projections/index.html">Projections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conversions/index.html">Conversions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Transformations</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="affine.html">Affine transformation</a></li>
<li class="toctree-l3"><a class="reference internal" href="defmodel.html">Multi-component time-based deformation model</a></li>
<li class="toctree-l3"><a class="reference internal" href="deformation.html">Kinematic datum shifting utilizing a deformation model</a></li>
<li class="toctree-l3"><a class="reference internal" href="geogoffset.html">Geographic offsets</a></li>
<li class="toctree-l3"><a class="reference internal" href="gridshift.html">General grid shift</a></li>
<li class="toctree-l3"><a class="reference internal" href="helmert.html">Helmert transform</a></li>
<li class="toctree-l3"><a class="reference internal" href="horner.html">Horner polynomial evaluation</a></li>
<li class="toctree-l3"><a class="reference internal" href="molodensky.html">Molodensky transform</a></li>
<li class="toctree-l3"><a class="reference internal" href="molobadekas.html">Molodensky-Badekas transform</a></li>
<li class="toctree-l3"><a class="reference internal" href="hgridshift.html">Horizontal grid shift</a></li>
<li class="toctree-l3"><a class="reference internal" href="tinshift.html">Triangulated Irregular Network based transformation</a></li>
<li class="toctree-l3"><a class="reference internal" href="vertoffset.html">Vertical Offset And Slope</a></li>
<li class="toctree-l3"><a class="reference internal" href="vgridshift.html">Vertical grid shift</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Geocentric grid shift</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline.html">The pipeline operator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operations_computation.html">Computation of coordinate operations between two CRS</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../resource_files.html">Resource files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../geodesic.html">Geodesic calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../specifications/index.html">Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zreferences.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #353130" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PROJ</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Coordinate operations</a></li>
          <li class="breadcrumb-item"><a href="index.html">Transformations</a></li>
      <li class="breadcrumb-item active">Geocentric grid shift</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/OSGeo/PROJ/blob/9.2/docs/source/operations/transformations/xyzgridshift.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="vgridshift.html" class="btn btn-neutral float-left" title="Vertical grid shift" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../pipeline.html" class="btn btn-neutral float-right" title="The pipeline operator" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="geocentric-grid-shift">
<span id="xyzgridshift"></span><h1>Geocentric grid shift<a class="headerlink" href="#geocentric-grid-shift" title="Permalink to this heading">¶</a></h1>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.0.</span></p>
</div>
<p>Geocentric translation using a grid shift</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>Alias</strong></p></td>
<td><p>xyzgridshift</p></td>
</tr>
<tr class="row-even"><td><p><strong>Domain</strong></p></td>
<td><p>3D</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Input type</strong></p></td>
<td><p>Cartesian coordinates</p></td>
</tr>
<tr class="row-even"><td><p><strong>Output type</strong></p></td>
<td><p>Cartesian coordinates</p></td>
</tr>
</tbody>
</table>
<p>Perform a geocentric translation by bilinear interpolation of dx, dy, dz
translation values from a grid. The grid is referenced against either the
2D geographic CRS corresponding to the input (or sometimes output) CRS.</p>
<p>This method is described (in French) in <span id="id1">[<a class="reference internal" href="../../zreferences.html#id29" title="IGN. Grille de parametres de transformation de coordonnees - GR3DF97A - notice d'utilisation. Technical Report, Service de Geodesie et Nivellement, Institut Geographique National, 1997. URL: https://geodesie.ign.fr/contenu/fichiers/documentation/algorithmes/notice/NTG_88.pdf.">NTF_88</a>]</span>
and as EPSG operation method code 9655 in <span id="id2">[<a class="reference internal" href="../../zreferences.html#id19" title="IOGP. Geomatics guidance note 7, part 2: coordinate conversions &amp; transformations including formulas. IOGP Publication 373-7-2, International Association For Oil And Gas Producers, 2018. URL: https://www.iogp.org/bookstore/product/coordinate-conversions-and-transformation-including-formulas/.">IOGP2018</a>]</span> (§2.4.4.1.1
France geocentric interpolation).</p>
<p>The translation in the grids are added to the input coordinates in the forward direction,
and subtracted in the reverse direction.
By default (if <code class="docutils literal notranslate"><span class="pre">grid_ref=input_crs</span></code>), in the forward direction, the input coordinates
are converted to their geographic equivalent to directly read and interpolate from
the grid. In the reverse direction, an iterative method is used to be able to find
the grid locations to read.
If <code class="docutils literal notranslate"><span class="pre">grid_ref=output_crs</span></code> is used, then the reverse strategy is applied: iterative
method in the forward direction, and direct read in the reverse direction.</p>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this heading">¶</a></h2>
<p>NTF to RGF93 transformation using <code class="file docutils literal notranslate"><span class="pre">gr3df97a.tif</span></code> grid</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+proj=pipeline
    +step +proj=push +v_3
    +step +proj=cart +ellps=clrk80ign
    +step +proj=xyzgridshift +grids=gr3df97a.tif +grid_ref=output_crs +ellps=GRS80
    +step +proj=cart +ellps=GRS80 +inv
    +step +proj=pop +v_3
</pre></div>
</div>
<section id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Permalink to this heading">¶</a></h3>
<p>The ellipsoid parameters should be the ones consistent with <code class="docutils literal notranslate"><span class="pre">grid_ref</span></code>.
They are used to perform a geocentric to geographic conversion to find the
translation parameters.</p>
<section id="required">
<h4>Required<a class="headerlink" href="#required" title="Permalink to this heading">¶</a></h4>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-ellps">
<span class="sig-name descname"><span class="pre">+ellps</span></span><span class="sig-prename descclassname"><span class="pre">=&lt;value&gt;</span></span><a class="headerlink" href="#cmdoption-arg-ellps" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of a built-in ellipsoid definition.</p>
<p>See <a class="reference internal" href="../../usage/ellipsoids.html#ellipsoids"><span class="std std-ref">Ellipsoids</span></a> for more information, or execute
<a class="reference internal" href="../../apps/proj.html#cmdoption-proj-le"><code class="xref std std-option docutils literal notranslate"><span class="pre">proj</span> <span class="pre">-le</span></code></a> for a list of built-in ellipsoid names.</p>
<p><em>Defaults to &quot;GRS80&quot;.</em></p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-grids">
<span class="sig-name descname"><span class="pre">+grids</span></span><span class="sig-prename descclassname"><span class="pre">=&lt;list&gt;</span></span><a class="headerlink" href="#cmdoption-arg-grids" title="Permalink to this definition">¶</a></dt>
<dd><p>Comma-separated list of grids to load. If a grid is prefixed by an <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> the
grid is considered optional and PROJ will the not complain if the grid is
not available.</p>
<p>Grids are expected to be in GeoTIFF format (<a class="reference internal" href="../../specifications/geodetictiffgrids.html#geodetictiffgrids"><span class="std std-ref">Geodetic TIFF grids (GTG)</span></a>). If no metadata is provided,
the first, second and third samples are assumed to be the geocentric
translation along X, Y and Z axis respectively, in metres.</p>
</dd></dl>

</section>
<section id="optional">
<h4>Optional<a class="headerlink" href="#optional" title="Permalink to this heading">¶</a></h4>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-grid_ref">
<span class="sig-name descname"><span class="pre">+grid_ref</span></span><span class="sig-prename descclassname"><span class="pre">=input_crs/output_crs</span></span><a class="headerlink" href="#cmdoption-arg-grid_ref" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify in which CRS the grid is referenced to. The default value is
input_crs. That is the grid is referenced in the geographic CRS corresponding
to the input geocentric CRS.</p>
<p>If output_crs is specified, the grid is referenced in the geographic CRS corresponding
to the output geocentric CRS. This is for example the case for the French
<code class="file docutils literal notranslate"><span class="pre">gr3df97a.tif</span></code> grid converting from NTF to RGF93, but referenced against RGF93.
Thus in the forward direction (NTF-&gt;RGF93), an iterative method is used to find
the appropriate shift.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-multiplier">
<span class="sig-name descname"><span class="pre">+multiplier</span></span><span class="sig-prename descclassname"><span class="pre">=&lt;value&gt;</span></span><a class="headerlink" href="#cmdoption-arg-multiplier" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify the multiplier to apply to the grid values. Defaults to 1.0</p>
</dd></dl>

</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="vgridshift.html" class="btn btn-neutral float-left" title="Vertical grid shift" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../pipeline.html" class="btn btn-neutral float-right" title="The pipeline operator" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 1983-2023.
      <span class="lastupdated">Last updated on 24 Aug 2023.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>