<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Horizontal grid shift &mdash; PROJ 9.2.1 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="canonical" href="https://proj.orgoperations/transformations/hgridshift.html"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=6ebb12ef"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Triangulated Irregular Network based transformation" href="tinshift.html" />
    <link rel="prev" title="Molodensky-Badekas transform" href="molobadekas.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #353130" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                9.2.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../news.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/index.html">Using PROJ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apps/index.html">Applications</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Coordinate operations</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../projections/index.html">Projections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conversions/index.html">Conversions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Transformations</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="affine.html">Affine transformation</a></li>
<li class="toctree-l3"><a class="reference internal" href="defmodel.html">Multi-component time-based deformation model</a></li>
<li class="toctree-l3"><a class="reference internal" href="deformation.html">Kinematic datum shifting utilizing a deformation model</a></li>
<li class="toctree-l3"><a class="reference internal" href="geogoffset.html">Geographic offsets</a></li>
<li class="toctree-l3"><a class="reference internal" href="gridshift.html">General grid shift</a></li>
<li class="toctree-l3"><a class="reference internal" href="helmert.html">Helmert transform</a></li>
<li class="toctree-l3"><a class="reference internal" href="horner.html">Horner polynomial evaluation</a></li>
<li class="toctree-l3"><a class="reference internal" href="molodensky.html">Molodensky transform</a></li>
<li class="toctree-l3"><a class="reference internal" href="molobadekas.html">Molodensky-Badekas transform</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Horizontal grid shift</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#temporal-gridshifting">Temporal gridshifting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="tinshift.html">Triangulated Irregular Network based transformation</a></li>
<li class="toctree-l3"><a class="reference internal" href="vertoffset.html">Vertical Offset And Slope</a></li>
<li class="toctree-l3"><a class="reference internal" href="vgridshift.html">Vertical grid shift</a></li>
<li class="toctree-l3"><a class="reference internal" href="xyzgridshift.html">Geocentric grid shift</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline.html">The pipeline operator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operations_computation.html">Computation of coordinate operations between two CRS</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../resource_files.html">Resource files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../geodesic.html">Geodesic calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../specifications/index.html">Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zreferences.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #353130" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PROJ</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Coordinate operations</a></li>
          <li class="breadcrumb-item"><a href="index.html">Transformations</a></li>
      <li class="breadcrumb-item active">Horizontal grid shift</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/OSGeo/PROJ/blob/9.2/docs/source/operations/transformations/hgridshift.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="molobadekas.html" class="btn btn-neutral float-left" title="Molodensky-Badekas transform" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tinshift.html" class="btn btn-neutral float-right" title="Triangulated Irregular Network based transformation" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="horizontal-grid-shift">
<span id="hgridshift"></span><h1>Horizontal grid shift<a class="headerlink" href="#horizontal-grid-shift" title="Permalink to this heading">¶</a></h1>
<div class="versionadded">
<p><span class="versionmodified added">New in version 5.0.0.</span></p>
</div>
<p>Change of horizontal datum by grid shift.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>Alias</strong></p></td>
<td><p>hgridshift</p></td>
</tr>
<tr class="row-even"><td><p><strong>Domain</strong></p></td>
<td><p>2D, 3D and 4D</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Input type</strong></p></td>
<td><p>Geodetic coordinates (horizontal), meters (vertical),
decimalyear (temporal)</p></td>
</tr>
<tr class="row-even"><td><p><strong>Output type</strong></p></td>
<td><p>Geodetic coordinates (horizontal), meters (vertical),
decimalyear (temporal)</p></td>
</tr>
</tbody>
</table>
<p>The horizontal grid shift is done by offsetting the planar input coordinates by
a specific amount determined by the loaded grids. The simplest use case of the
horizontal grid shift is applying a single grid:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+proj=hgridshift +grids=nzgr2kgrid0005.gsb
</pre></div>
</div>
<p>More than one grid can be loaded at the same time, for instance in case the
dataset needs to be transformed spans several countries. In this example grids
of the continental US, Alaska and Canada is loaded at the same time:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+proj=hgridshift +grids=@conus,@alaska,@ntv2_0.gsb,@ntv_can.dat
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> in the above example states that the grid is optional, in case the grid
is not found in the PROJ search path. The list of grids is prioritized so that
grids in the start of the list takes precedence over the grids in the back of the
list.</p>
<p>PROJ supports GeoTIFF (<a class="reference internal" href="../../specifications/geodetictiffgrids.html#geodetictiffgrids"><span class="std std-ref">Geodetic TIFF grids (GTG)</span></a>), CTable2 and NTv2 files for horizontal grid corrections. Details
about all three formats can be found in the GDAL documentation and/or driver source
code. GDAL reads and writes all three formats. Using GDAL for construction of
new grids is recommended.</p>
<p>To apply as well ellipsoidal height differences sometimes present in some grids
(such as US NADCON5 grids), use the <a class="reference internal" href="gridshift.html#gridshift"><span class="std std-ref">General grid shift</span></a> method.</p>
<section id="temporal-gridshifting">
<h2>Temporal gridshifting<a class="headerlink" href="#temporal-gridshifting" title="Permalink to this heading">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 5.1.0.</span></p>
</div>
<p>By initializing the horizontal gridshift operation with a central epoch, it can be
used as a step function applying the grid offsets only if a coordinate is
transformed from an epoch before grids central epoch to an epoch after. This is
handy in transformations where it is necessary to handle deformations caused by
seismic activity.</p>
<p>The central epoch of the grid is controlled with <a class="reference internal" href="deformation.html#cmdoption-arg-t_epoch"><code class="xref std std-option docutils literal notranslate"><span class="pre">+t_epoch</span></code></a> and the final
epoch of the coordinate is set with <a class="reference internal" href="#cmdoption-arg-t_final"><code class="xref std std-option docutils literal notranslate"><span class="pre">+t_final</span></code></a>. The observation epoch of
the coordinate is part of the coordinate tuple.</p>
<p>Suppose we want to model the deformation of the 2008 earthquake in Iceland in
a transformation of data from 2005 to 2009:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echo 63.992 -21.014 10.0 2005.0 | cct +proj=hgridshift +grids=iceland2008.gsb +t_epoch=2008.4071 +t_final=2009.0
63.9920021 -21.0140013 10.0 2005.0
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The timestamp of the resulting coordinate is still 2005.0. The observation
time is always kept unchanged as it would otherwise be impossible to do the
inverse transformation.</p>
</div>
<p>Temporal gridshifting is especially powerful in transformation pipelines where
several gridshifts can be chained together, effectively acting as a series of
step functions that can be applied to a coordinate that is propagated through
time. In the following example we establish a pipeline that allows transformation
of coordinates from any given epoch up until the current date, applying only
those gridshifts that have central epochs between the observation epoch and
the final epoch:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+proj=pipeline +t_final=now
+step +proj=hgridshift +grids=earthquake_1.gsb +t_epoch=2010.421
+step +proj=hgridshift +grids=earthquake_2.gsb +t_epoch=2013.853
+step +proj=hgridshift +grids=earthquake_3.gsb +t_epoch=2017.713
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The special epoch <em>now</em> is used when specifying the final epoch with
<a class="reference internal" href="#cmdoption-arg-t_final"><code class="xref std std-option docutils literal notranslate"><span class="pre">+t_final</span></code></a>. This results in coordinates being transformed to the
current date. Additionally, <a class="reference internal" href="#cmdoption-arg-t_final"><code class="xref std std-option docutils literal notranslate"><span class="pre">+t_final</span></code></a> is used as a
<a class="reference internal" href="../pipeline.html#global-pipeline-parameter"><span class="std std-ref">global pipeline parameter</span></a>, which means
that it is applied to all the steps in the pipeline.</p>
</div>
<p>In the above transformation, a coordinate with observation epoch 2009.32 would
be subject to all three gridshift steps in the pipeline. A coordinate with
observation epoch 2014.12 would only by offset by the last step in the pipeline.</p>
</section>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this heading">¶</a></h2>
<section id="required">
<h3>Required<a class="headerlink" href="#required" title="Permalink to this heading">¶</a></h3>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-grids">
<span class="sig-name descname"><span class="pre">+grids</span></span><span class="sig-prename descclassname"><span class="pre">=&lt;list&gt;</span></span><a class="headerlink" href="#cmdoption-arg-grids" title="Permalink to this definition">¶</a></dt>
<dd><p>Comma-separated list of grids to load. If a grid is prefixed by an <cite>&#64;</cite> the
grid is considered optional and PROJ will the not complain if the grid is
not available.</p>
<p>Grids are expected to be in GeoTIFF (<a class="reference internal" href="../../specifications/geodetictiffgrids.html#geodetictiffgrids"><span class="std std-ref">Geodetic TIFF grids (GTG)</span></a>) or NTv2 format (or CTable2 for legacy
grids)</p>
</dd></dl>

</section>
<section id="optional">
<h3>Optional<a class="headerlink" href="#optional" title="Permalink to this heading">¶</a></h3>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-t_epoch">
<span class="sig-name descname"><span class="pre">+t_epoch</span></span><span class="sig-prename descclassname"><span class="pre">=&lt;time&gt;</span></span><a class="headerlink" href="#cmdoption-arg-t_epoch" title="Permalink to this definition">¶</a></dt>
<dd><p>Central epoch of the transformation.</p>
</dd></dl>

<div class="versionadded">
<p><span class="versionmodified added">New in version 5.1.0.</span></p>
</div>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-t_final">
<span class="sig-name descname"><span class="pre">+t_final</span></span><span class="sig-prename descclassname"><span class="pre">=&lt;time&gt;</span></span><a class="headerlink" href="#cmdoption-arg-t_final" title="Permalink to this definition">¶</a></dt>
<dd><p>Final epoch that the coordinate will be propagated to after transformation.
The special epoch <em>now</em> can be used instead of writing a specific period in
time. When <em>now</em> is used, it is replaced internally with the epoch of the
transformation. This means that the resulting coordinate will be slightly
different if carried out again at a later date.</p>
</dd></dl>

<div class="versionadded">
<p><span class="versionmodified added">New in version 5.1.0.</span></p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="molobadekas.html" class="btn btn-neutral float-left" title="Molodensky-Badekas transform" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tinshift.html" class="btn btn-neutral float-right" title="Triangulated Irregular Network based transformation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 1983-2023.
      <span class="lastupdated">Last updated on 24 Aug 2023.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>