

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Vertical grid shift &mdash; PROJ.4 5.2.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="The pipeline operator" href="../pipeline.html" />
    <link rel="prev" title="Horizontal grid shift" href="hgridshift.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> PROJ.4
          

          
          </a>

          
            
            
              <div class="version">
                5.2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../news.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/index.html">Using PROJ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apps/index.html">Applications</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Coordinate operations</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../projections/index.html">Projections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conversions/index.html">Conversions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Transformations</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="deformation.html">Kinematic datum shifting utilizing a deformation model</a></li>
<li class="toctree-l3"><a class="reference internal" href="helmert.html">Helmert transform</a></li>
<li class="toctree-l3"><a class="reference internal" href="molodensky.html">Molodensky transform</a></li>
<li class="toctree-l3"><a class="reference internal" href="hgridshift.html">Horizontal grid shift</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Vertical grid shift</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#temporal-gridshifting">Temporal gridshifting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline.html">The pipeline operator</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../resource_files.html">Resource files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../geodesic.html">Geodesic calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PROJ.4</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Coordinate operations</a> &raquo;</li>
        
          <li><a href="index.html">Transformations</a> &raquo;</li>
        
      <li>Vertical grid shift</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="vertical-grid-shift">
<span id="vgridshift"></span><h1>Vertical grid shift<a class="headerlink" href="#vertical-grid-shift" title="Permalink to this headline">¶</a></h1>
<div class="versionadded">
<p><span class="versionmodified">New in version 5.0.0.</span></p>
</div>
<p>Change Vertical datum change by grid shift</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Domain</strong></td>
<td>3D and 4D</td>
</tr>
<tr class="row-even"><td><strong>Input type</strong></td>
<td>Geodetic coordinates (horizontal), meters (vertical),
decimalyear (temporal)</td>
</tr>
<tr class="row-odd"><td><strong>Output type</strong></td>
<td>Geodetic coordinates (horizontal), meters (vertical),
decimalyear (temporal)</td>
</tr>
</tbody>
</table>
<p>The vertical grid shift is done by offsetting the vertical input coordinates by
a specific amount determined by the loaded grids. The simplest use case of the
horizontal grid shift is applying a single grid. Here we change the vertical
reference from the ellipsoid to the global geoid model, EGM96:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+proj=vgridshift +grids=egm96_16.gtx
</pre></div>
</div>
<p>More than one grid can be loaded at the same time, for instance in the case where
a better geoid model than the global is available for a certain area. Here the
gridshift is set up so that the local DVR90 geoid model takes precedence over
the global model:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+proj=vgridshift +grids=@dvr90.gtx,egm96_16.gtx
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> in the above example states that the grid is optional, in case the grid
is not found in the PROJ search path. The list of grids is prioritized so that
grids in the start of the list takes precedence over the grids in the back of the
list.</p>
<p>PROJ supports the GTX file format for vertical grid corrections. Details
about all the format can be found in the GDAL documentation. GDAL both reads and
writes the format. Using GDAL for construction of new grids is recommended.</p>
<div class="section" id="temporal-gridshifting">
<h2>Temporal gridshifting<a class="headerlink" href="#temporal-gridshifting" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 5.1.0.</span></p>
</div>
<p>By initializing the vertical gridshift operation with a central epoch, it can be
used as a step function applying the grid offsets only if a coordinate is
transformed from an epoch before grids central epoch to an epoch after. This is
handy in transformations where it is necessary to handle deformations caused by
seismic activity.</p>
<p>The central epoch of the grid is controlled with <a class="reference internal" href="#cmdoption-arg-t-epoch"><code class="xref std std-option docutils literal notranslate"><span class="pre">+t_epoch</span></code></a> and the final
epoch of the coordinate is set with <a class="reference internal" href="#cmdoption-arg-t-final"><code class="xref std std-option docutils literal notranslate"><span class="pre">+t_final</span></code></a>. The observation epoch of
the coordinate is part of the coordinate tuple.</p>
<p>Suppose we want to model the deformation of the 2008 earthquake in Iceland in
a transformation of data from 2005 to 2009:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echo 63.992 -21.014 10.0 2005.0 | cct +proj=vgridshift +grids=iceland2008.gtx +t_epoch=2008.4071 +t_final=2009.0
63.992 -21.014 10.11 2005.0
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The timestamp of the resulting coordinate is still 2005.0. The observation
time is always kept unchanged as it would otherwise be impossible to do the
inverse transformation.</p>
</div>
<p>Temporal gridshifting is especially powerful in transformation pipelines where
several gridshifts can be chained together, effectively acting as a series of
step functions that can be applied to a coordinate that is propagated through
time. In the following example we establish a pipeline that allows transformation
of coordinates from any given epoch up until the current date, applying only
those gridshifts that have central epochs between the observation epoch and
the final epoch:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+proj=pipeline +t_final=now
+step +proj=vgridshift +grids=earthquake_1.gtx +t_epoch=2010.421
+step +proj=vgridshift +grids=earthquake_2.gtx +t_epoch=2013.853
+step +proj=vgridshift +grids=earthquake_3.gtx +t_epoch=2017.713
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The special epoch <em>now</em> is used when specifying the final epoch with
<a class="reference internal" href="#cmdoption-arg-t-final"><code class="xref std std-option docutils literal notranslate"><span class="pre">+t_final</span></code></a>. This results in coordinates being transformed to the
current date. Additionally, <a class="reference internal" href="#cmdoption-arg-t-final"><code class="xref std std-option docutils literal notranslate"><span class="pre">+t_final</span></code></a> is used as a
<a class="reference internal" href="../pipeline.html#global-pipeline-parameter"><span class="std std-ref">global pipeline parameter</span></a>, which means
that it is applied to all the steps in the pipeline.</p>
</div>
<p>In the above transformation, a coordinate with observation epoch 2009.32 would
be subject to all three gridshift steps in the pipeline. A coordinate with
observation epoch 2014.12 would only by offset by the last step in the pipeline.</p>
</div>
<div class="section" id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="required">
<h3>Required<a class="headerlink" href="#required" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-arg-grids">
<code class="descname">+grids</code><code class="descclassname">=&lt;list&gt;</code><a class="headerlink" href="#cmdoption-arg-grids" title="Permalink to this definition">¶</a></dt>
<dd><p>Comma-separated list of grids to load. If a grid is prefixed by an <cite>&#64;</cite> the
grid is considered optional and PROJ will the not complain if the grid is
not available.</p>
<p>Grids are expected to be in GTX format.</p>
</dd></dl>

</div>
<div class="section" id="optional">
<h3>Optional<a class="headerlink" href="#optional" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-arg-t-epoch">
<code class="descname">+t_epoch</code><code class="descclassname">=&lt;time&gt;</code><a class="headerlink" href="#cmdoption-arg-t-epoch" title="Permalink to this definition">¶</a></dt>
<dd><p>Central epoch of the transformation.</p>
</dd></dl>

<div class="versionadded">
<p><span class="versionmodified">New in version 5.1.0.</span></p>
</div>
<dl class="option">
<dt id="cmdoption-arg-t-final">
<code class="descname">+t_final</code><code class="descclassname">=&lt;time&gt;</code><a class="headerlink" href="#cmdoption-arg-t-final" title="Permalink to this definition">¶</a></dt>
<dd><p>Final epoch that the coordinate will be propagated to after transformation.
The special epoch <em>now</em> can be used instead of writing a specific period in
time. When <em>now</em> is used, it is replaced internally with the epoch of the
transformation. This means that the resulting coordinate will be slightly
different if carried out again at a later date.</p>
</dd></dl>

<div class="versionadded">
<p><span class="versionmodified">New in version 5.1.0.</span></p>
</div>
<dl class="option">
<dt id="cmdoption-arg-multiplier">
<code class="descname">+multiplier</code><code class="descclassname">=&lt;value&gt;</code><a class="headerlink" href="#cmdoption-arg-multiplier" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify the multiplier to apply to the grid value in the forward transformation
direction, such that:</p>
<div class="math notranslate nohighlight" id="equation-multiplier-formula">
<span class="eqno">(1)<a class="headerlink" href="#equation-multiplier-formula" title="Permalink to this equation">¶</a></span>\[Z_{target} = Z_{source} + multiplier \times gridvalue\]</div>
<p>The multiplier can be used to control whether the gridvalue should be added
or sustracted, and if unit conversion must be done (the multiplied gridvalue
must be expressed in metre).</p>
<p>Note that the default is <cite>-1.0</cite> for historical reasons.</p>
</dd></dl>

<div class="versionadded">
<p><span class="versionmodified">New in version 5.2.0.</span></p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../pipeline.html" class="btn btn-neutral float-right" title="The pipeline operator" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hgridshift.html" class="btn btn-neutral" title="Horizontal grid shift" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 1983-2018.
      Last updated on 28 Sep 2018.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'5.2.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>