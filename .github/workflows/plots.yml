name: Plots

on: [push, pull_request]

jobs:

  needs: [Docs]
  plots:

    runs-on: ubuntu-latest
    env:
      PROJ_EXE: proj
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - uses: goanpeca/setup-miniconda@v1
        with:
          channels: conda-forge
          auto-update-conda: true
      - name: Setup
        shell: bash -l {0}
        run: |
            conda update -n base -c defaults conda
            conda install descartes shapely geopandas matplotlib proj
      - name: Setup
        shell: bash -l {0}
        working-directory: ./docs/plot
        run: |
            ./plot.sh

      - uses: actions/upload-artifact@v2
        with:
          name: Images
          path: docs/plot/images
