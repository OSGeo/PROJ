

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API &mdash; proj.4 4.9.3 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="proj.4 4.9.3 documentation" href="../index.html"/>
        <link rel="up" title="Development" href="index.html"/>
        <link rel="next" title="Threads" href="threads.html"/>
        <link rel="prev" title="Development" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> proj.4
          

          
          </a>

          
            
            
              <div class="version">
                4.9.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apps/index.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projections/index.html">Projections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parameters.html">Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geodesic.html">Geodesic Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../grids.html">Grids</a></li>
<li class="toctree-l1"><a class="reference internal" href="../htpd.html">HTPD</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Development</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api-functions">API Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pj-transform">pj_transform</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pj-init-plus">pj_init_plus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pj-free">pj_free</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pj-is-latlong">pj_is_latlong</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pj-is-geocent">pj_is_geocent</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pj-get-def">pj_get_def</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pj-latlong-from-proj">pj_latlong_from_proj</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pj-set-finder">pj_set_finder</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pj-set-searchpath">pj_set_searchpath</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pj-deallocate-grids">pj_deallocate_grids</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pj-strerrno">pj_strerrno</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pj-get-errno-ref">pj_get_errno_ref</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pj-get-release">pj_get_release</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="threads.html">Threads</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings.html">Language bindings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">proj.4</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Development</a> &raquo;</li>
        
      <li>API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api">
<span id="id1"></span><h1>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#api" id="id2">API</a><ul>
<li><a class="reference internal" href="#introduction" id="id3">Introduction</a></li>
<li><a class="reference internal" href="#example" id="id4">Example</a></li>
<li><a class="reference internal" href="#api-functions" id="id5">API Functions</a><ul>
<li><a class="reference internal" href="#pj-transform" id="id6">pj_transform</a></li>
<li><a class="reference internal" href="#pj-init-plus" id="id7">pj_init_plus</a></li>
<li><a class="reference internal" href="#pj-free" id="id8">pj_free</a></li>
<li><a class="reference internal" href="#pj-is-latlong" id="id9">pj_is_latlong</a></li>
<li><a class="reference internal" href="#pj-is-geocent" id="id10">pj_is_geocent</a></li>
<li><a class="reference internal" href="#pj-get-def" id="id11">pj_get_def</a></li>
<li><a class="reference internal" href="#pj-latlong-from-proj" id="id12">pj_latlong_from_proj</a></li>
<li><a class="reference internal" href="#pj-set-finder" id="id13">pj_set_finder</a></li>
<li><a class="reference internal" href="#pj-set-searchpath" id="id14">pj_set_searchpath</a></li>
<li><a class="reference internal" href="#pj-deallocate-grids" id="id15">pj_deallocate_grids</a></li>
<li><a class="reference internal" href="#pj-strerrno" id="id16">pj_strerrno</a></li>
<li><a class="reference internal" href="#pj-get-errno-ref" id="id17">pj_get_errno_ref</a></li>
<li><a class="reference internal" href="#pj-get-release" id="id18">pj_get_release</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Procedure <code class="docutils literal"><span class="pre">pj_init()</span></code> selects and initializes a cartographic
projection with its argument control parameters. <code class="docutils literal"><span class="pre">argc</span></code> is the number
of elements in the array of control strings argv that each contain
individual cartographic control keyword assignments (+ proj arguments).
The list must contain at least the proj=projection and Earth’s radius or
elliptical parameters. If the initialization of the projection is
successful a valid address is returned otherwise a NULL value.</p>
<p>The <code class="docutils literal"><span class="pre">pj_init_plus()</span></code> function operates similarly to <code class="docutils literal"><span class="pre">pj_init()</span></code> but
takes a single string containing the definition, with each parameter
prefixed with a plus sign. For example
<code class="docutils literal"><span class="pre">+proj=utm</span> <span class="pre">+zone=11</span> <span class="pre">+ellps=WGS84</span></code>.</p>
<p>Once initialization is performed either forward or inverse projections
can be performed with the returned value of <code class="docutils literal"><span class="pre">pj_init()</span></code> used as the
argument proj. The argument structure projUV values u and v contain
respective longitude and latitude or x and y. Latitude and longitude are
in radians. If a projection operation fails, both elements of projUV are
set to <code class="docutils literal"><span class="pre">HUGE_VAL</span></code> (defined in <code class="docutils literal"><span class="pre">math.h</span></code>).</p>
<p>Note: all projections have a forward mode, but some do not have an
inverse projection. If the projection does not have an inverse the
projPJ structure element inv will be <code class="docutils literal"><span class="pre">NULL</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">pj_transform</span></code> function may be used to transform points between
the two provided coordinate systems. In addition to converting between
cartographic projection coordinates and geographic coordinates, this
function also takes care of datum shifts if possible between the source
and destination coordinate system. Unlike <code class="docutils literal"><span class="pre">pj_fwd()</span></code> and <code class="docutils literal"><span class="pre">pj_inv()</span></code>
it is also allowable for the coordinate system definitions
<code class="docutils literal"><span class="pre">(projPJ</span> <span class="pre">*)</span></code> to be geographic coordinate systems (defined as
<code class="docutils literal"><span class="pre">+proj=latlong</span></code>).
The x, y and z arrays contain the input values of the points, and are replaced with the output values.
The function returns zero on success, or the error number (also in <code class="docutils literal"><span class="pre">pj_errno</span></code>)
on failure.</p>
<p>Memory associated with the projection may be freed with <code class="docutils literal"><span class="pre">pj_free()</span></code>.</p>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>The following program reads latitude and longitude values in decimal
degress, performs Mercator projection with a Clarke 1866 ellipsoid and a
33° latitude of true scale and prints the projected cartesian values in
meters:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span>#include &lt;proj_api.h&gt;

main(int argc, char **argv) {
     projPJ pj_merc, pj_latlong;
     double x, y;

     if (!(pj_merc = pj_init_plus(&quot;+proj=merc +ellps=clrk66 +lat_ts=33&quot;)) )
        exit(1);
     if (!(pj_latlong = pj_init_plus(&quot;+proj=latlong +ellps=clrk66&quot;)) )
        exit(1);
     while (scanf(&quot;%lf %lf&quot;, &amp;x, &amp;y) == 2) {
        x *= DEG_TO_RAD;
        y *= DEG_TO_RAD;
        p = pj_transform(pj_latlong, pj_merc, 1, 1, &amp;x, &amp;y, NULL );
        printf(&quot;%.2f\t%.2f\n&quot;, x, y);
     }
     exit(0);
}
</pre></div>
</div>
<p>For this program, an input of <code class="docutils literal"><span class="pre">-16</span> <span class="pre">20.25</span></code> would give a result of
<code class="docutils literal"><span class="pre">-1495284.21</span> <span class="pre">1920596.79</span></code>.</p>
</div>
<div class="section" id="api-functions">
<h2>API Functions<a class="headerlink" href="#api-functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pj-transform">
<h3>pj_transform<a class="headerlink" href="#pj-transform" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">pj_transform</span><span class="p">(</span> <span class="n">projPJ</span> <span class="n">srcdefn</span><span class="p">,</span>
                  <span class="n">projPJ</span> <span class="n">dstdefn</span><span class="p">,</span>
                  <span class="n">long</span> <span class="n">point_count</span><span class="p">,</span>
                  <span class="nb">int</span> <span class="n">point_offset</span><span class="p">,</span>
                  <span class="n">double</span> <span class="o">*</span><span class="n">x</span><span class="p">,</span>
                  <span class="n">double</span> <span class="o">*</span><span class="n">y</span><span class="p">,</span>
                  <span class="n">double</span> <span class="o">*</span><span class="n">z</span> <span class="p">);</span>
</pre></div>
</div>
<p>Transform the x/y/z points from the source coordinate system to the
destination coordinate system.</p>
<p><code class="docutils literal"><span class="pre">srcdefn</span></code>: source (input) coordinate system.</p>
<p><code class="docutils literal"><span class="pre">dstdefn</span></code>: destination (output) coordinate system.</p>
<p><code class="docutils literal"><span class="pre">point_count</span></code>: the number of points to be processed (the size of the
x/y/z arrays).</p>
<p><code class="docutils literal"><span class="pre">point_offset</span></code>: the step size from value to value (measured in
doubles) within the x/y/z arrays - normally 1 for a packed array. May be
used to operate on xyz interleaved point arrays.</p>
<p><code class="docutils literal"><span class="pre">x</span></code>/<code class="docutils literal"><span class="pre">y</span></code>/<code class="docutils literal"><span class="pre">z</span></code>: The array of X, Y and Z coordinate values passed as
input, and modified in place for output. The Z may optionally be NULL.</p>
<p><code class="docutils literal"><span class="pre">return</span></code>: The return is zero on success, or a PROJ.4 error code.</p>
<p>The <code class="docutils literal"><span class="pre">pj_transform()</span></code> function transforms the passed in list of points
from the source coordinate system to the destination coordinate system.
Note that geographic locations need to be passed in radians, not decimal
degrees, and will be returned similarly. The <code class="docutils literal"><span class="pre">z</span></code> array may be passed
as NULL if Z values are not available.</p>
<p>If there is an overall failure, an error code will be returned from the
function. If individual points fail to transform - for instance due to
being over the horizon - then those x/y/z values will be set to
<code class="docutils literal"><span class="pre">HUGE_VAL</span></code> on return. Input values that are <code class="docutils literal"><span class="pre">HUGE_VAL</span></code> will not be
transformed.</p>
</div>
<div class="section" id="pj-init-plus">
<h3>pj_init_plus<a class="headerlink" href="#pj-init-plus" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">projPJ</span> <span class="n">pj_init_plus</span><span class="p">(</span><span class="n">const</span> <span class="n">char</span> <span class="o">*</span><span class="n">definition</span><span class="p">);</span>
</pre></div>
</div>
<p>This function converts a string representation of a coordinate system
definition into a projPJ object suitable for use with other API
functions. On failure the function will return NULL and set pj_errno.
The definition should be of the general form
<code class="docutils literal"><span class="pre">+proj=tmerc</span> <span class="pre">+lon_0</span> <span class="pre">+datum=WGS84</span></code>. Refer to PROJ.4 documentation and
the <a class="reference internal" href="../parameters.html#parameters"><span class="std std-ref">Parameters</span></a> notes for additional detail.</p>
<p>Coordinate system objects allocated with <code class="docutils literal"><span class="pre">pj_init_plus()</span></code> should be
deallocated with <code class="docutils literal"><span class="pre">pj_free()</span></code>.</p>
</div>
<div class="section" id="pj-free">
<h3>pj_free<a class="headerlink" href="#pj-free" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">pj_free</span><span class="p">(</span> <span class="n">projPJ</span> <span class="n">pj</span> <span class="p">);</span>
</pre></div>
</div>
<p>Frees all resources associated with pj.</p>
</div>
<div class="section" id="pj-is-latlong">
<h3>pj_is_latlong<a class="headerlink" href="#pj-is-latlong" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">pj_is_latlong</span><span class="p">(</span> <span class="n">projPJ</span> <span class="n">pj</span> <span class="p">);</span>
</pre></div>
</div>
<p>Returns TRUE if the passed coordinate system is geographic
(<code class="docutils literal"><span class="pre">proj=latlong</span></code>).</p>
</div>
<div class="section" id="pj-is-geocent">
<h3>pj_is_geocent<a class="headerlink" href="#pj-is-geocent" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span>int pj_is_geocent( projPJ pj );``
</pre></div>
</div>
<p>Returns TRUE if the coordinate system is geocentric (<code class="docutils literal"><span class="pre">proj=geocent</span></code>).</p>
</div>
<div class="section" id="pj-get-def">
<h3>pj_get_def<a class="headerlink" href="#pj-get-def" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span>char *pj_get_def( projPJ pj, int options);``
</pre></div>
</div>
<p>Returns the PROJ.4 initialization string suitable for use with
<code class="docutils literal"><span class="pre">pj_init_plus()</span></code> that would produce this coordinate system, but with
the definition expanded as much as possible (for instance <code class="docutils literal"><span class="pre">+init=</span></code> and
<code class="docutils literal"><span class="pre">+datum=</span></code> definitions).</p>
</div>
<div class="section" id="pj-latlong-from-proj">
<h3>pj_latlong_from_proj<a class="headerlink" href="#pj-latlong-from-proj" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span>projPJ pj_latlong_from_proj( projPJ pj_in );``
</pre></div>
</div>
<p>Returns a new coordinate system definition which is the geographic
coordinate (lat/long) system underlying <code class="docutils literal"><span class="pre">pj_in</span></code>.</p>
</div>
<div class="section" id="pj-set-finder">
<h3>pj_set_finder<a class="headerlink" href="#pj-set-finder" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span>void pj_set_finder( const char *(*new_finder)(const char *) );``
</pre></div>
</div>
<p>Install a custom function for finding init and grid shift files.</p>
</div>
<div class="section" id="pj-set-searchpath">
<h3>pj_set_searchpath<a class="headerlink" href="#pj-set-searchpath" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span>void pj_set_searchpath ( int count, const char **path );``
</pre></div>
</div>
<p>Set a list of directories to search for init and grid shift files.</p>
</div>
<div class="section" id="pj-deallocate-grids">
<h3>pj_deallocate_grids<a class="headerlink" href="#pj-deallocate-grids" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span>void pj_deallocate_grids( void );``
</pre></div>
</div>
<p>Frees all resources associated with loaded and cached datum shift grids.</p>
</div>
<div class="section" id="pj-strerrno">
<h3>pj_strerrno<a class="headerlink" href="#pj-strerrno" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span>char *pj_strerrno( int );``
</pre></div>
</div>
<p>Returns the error text associated with the passed in error code.</p>
</div>
<div class="section" id="pj-get-errno-ref">
<h3>pj_get_errno_ref<a class="headerlink" href="#pj-get-errno-ref" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span>int *pj_get_errno_ref( void );``
</pre></div>
</div>
<p>Returns a pointer to the global pj_errno error variable.</p>
</div>
<div class="section" id="pj-get-release">
<h3>pj_get_release<a class="headerlink" href="#pj-get-release" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span>const char *pj_get_release( void );``
</pre></div>
</div>
<p>Returns an internal string describing the release version.</p>
<div class="section" id="obsolete-functions">
<h4>Obsolete Functions<a class="headerlink" href="#obsolete-functions" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal"><span class="pre">XY</span> <span class="pre">pj_fwd(</span> <span class="pre">LP</span> <span class="pre">lp,</span> <span class="pre">PJ</span> <span class="pre">*P</span> <span class="pre">);</span></code></p>
<p><code class="docutils literal"><span class="pre">LP</span> <span class="pre">pj_inv(</span> <span class="pre">XY</span> <span class="pre">xy,</span> <span class="pre">PJ</span> <span class="pre">*P</span> <span class="pre">);</span></code></p>
<p><code class="docutils literal"><span class="pre">projPJ</span> <span class="pre">pj_init(int</span> <span class="pre">argc,</span> <span class="pre">char</span> <span class="pre">**argv);</span></code></p>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="threads.html" class="btn btn-neutral float-right" title="Threads" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Development" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 1986?-2016.
      Last updated on 19 Oct 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'4.9.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>